{"id":"TlJH","dependencies":[{"name":"/home/moh/Desktop/MYPortfolio/node_modules/@radix-ui/rect/dist/index.module.js.map","includedInParent":true,"mtime":1724625436911},{"name":"/home/moh/Desktop/MYPortfolio/package.json","includedInParent":true,"mtime":1725356897845},{"name":"/home/moh/Desktop/MYPortfolio/node_modules/@radix-ui/rect/package.json","includedInParent":true,"mtime":1724625436911}],"generated":{"js":"\"use strict\";function t(t,o){const i=c.get(t);return void 0===i?(c.set(t,{rect:{},callbacks:[o]}),1===c.size&&(e=requestAnimationFrame(n))):(i.callbacks.push(o),o(t.getBoundingClientRect())),()=>{const n=c.get(t);if(void 0===n)return;const i=n.callbacks.indexOf(o);i>-1&&n.callbacks.splice(i,1),0===n.callbacks.length&&(c.delete(t),0===c.size&&cancelAnimationFrame(e))}}let e;Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.observeElementRect=t;const c=new Map;function n(){const t=[];c.forEach((e,c)=>{const n=c.getBoundingClientRect();var o,i;i=n,((o=e.rect).width!==i.width||o.height!==i.height||o.top!==i.top||o.right!==i.right||o.bottom!==i.bottom||o.left!==i.left)&&(e.rect=n,t.push(e))}),t.forEach(t=>{t.callbacks.forEach(e=>e(t.rect))}),e=requestAnimationFrame(n)}"},"sourceMaps":{"js":{"mappings":[{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":0}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":8,"column":0},"generated":{"line":1,"column":13}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observeElementRect","original":{"line":8,"column":9},"generated":{"line":1,"column":22}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"elementToObserve","original":{"line":10,"column":2},"generated":{"line":1,"column":24}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callback","original":{"line":12,"column":2},"generated":{"line":1,"column":26}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":14,"column":2},"generated":{"line":1,"column":29}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":14,"column":8},"generated":{"line":1,"column":35}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":14,"column":23},"generated":{"line":1,"column":37}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"get","original":{"line":14,"column":40},"generated":{"line":1,"column":39}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"elementToObserve","original":{"line":14,"column":44},"generated":{"line":1,"column":43}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":31,"column":2},"generated":{"line":1,"column":46}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":31,"column":2},"generated":{"line":1,"column":58}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":16,"column":6},"generated":{"line":1,"column":62}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":19,"column":4},"generated":{"line":1,"column":65}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"set","original":{"line":19,"column":21},"generated":{"line":1,"column":67}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"elementToObserve","original":{"line":19,"column":25},"generated":{"line":1,"column":71}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":19,"column":43},"generated":{"line":1,"column":73}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect","original":{"line":19,"column":45},"generated":{"line":1,"column":74}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":19,"column":51},"generated":{"line":1,"column":79}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callbacks","original":{"line":19,"column":69},"generated":{"line":1,"column":82}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":19,"column":80},"generated":{"line":1,"column":92}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callback","original":{"line":19,"column":81},"generated":{"line":1,"column":93}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":21,"column":34},"generated":{"line":1,"column":98}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":21,"column":8},"generated":{"line":1,"column":102}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"size","original":{"line":21,"column":25},"generated":{"line":1,"column":104}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rafId","original":{"line":23,"column":6},"generated":{"line":1,"column":111}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"requestAnimationFrame","original":{"line":23,"column":14},"generated":{"line":1,"column":113}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":23,"column":36},"generated":{"line":1,"column":135}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":27,"column":4},"generated":{"line":1,"column":141}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callbacks","original":{"line":27,"column":17},"generated":{"line":1,"column":143}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"push","original":{"line":27,"column":27},"generated":{"line":1,"column":153}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callback","original":{"line":27,"column":32},"generated":{"line":1,"column":158}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callback","original":{"line":28,"column":4},"generated":{"line":1,"column":161}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"elementToObserve","original":{"line":28,"column":13},"generated":{"line":1,"column":163}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"getBoundingClientRect","original":{"line":28,"column":30},"generated":{"line":1,"column":165}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":31,"column":9},"generated":{"line":1,"column":191}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":32,"column":4},"generated":{"line":1,"column":196}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":32,"column":10},"generated":{"line":1,"column":202}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":32,"column":25},"generated":{"line":1,"column":204}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"get","original":{"line":32,"column":42},"generated":{"line":1,"column":206}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"elementToObserve","original":{"line":32,"column":46},"generated":{"line":1,"column":210}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":1,"column":213}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":33,"column":4},"generated":{"line":1,"column":221}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":33,"column":8},"generated":{"line":1,"column":225}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":33,"column":36},"generated":{"line":1,"column":227}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":36,"column":4},"generated":{"line":1,"column":234}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"index","original":{"line":36,"column":10},"generated":{"line":1,"column":240}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":36,"column":18},"generated":{"line":1,"column":242}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callbacks","original":{"line":36,"column":31},"generated":{"line":1,"column":244}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"indexOf","original":{"line":36,"column":41},"generated":{"line":1,"column":254}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callback","original":{"line":36,"column":49},"generated":{"line":1,"column":262}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"index","original":{"line":37,"column":8},"generated":{"line":1,"column":265}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":37,"column":17},"generated":{"line":1,"column":268}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":38,"column":6},"generated":{"line":1,"column":271}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callbacks","original":{"line":38,"column":19},"generated":{"line":1,"column":273}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"splice","original":{"line":38,"column":29},"generated":{"line":1,"column":283}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"index","original":{"line":38,"column":36},"generated":{"line":1,"column":290}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":38,"column":43},"generated":{"line":1,"column":292}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":41,"column":42},"generated":{"line":1,"column":295}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedData","original":{"line":41,"column":8},"generated":{"line":1,"column":299}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callbacks","original":{"line":41,"column":21},"generated":{"line":1,"column":301}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"length","original":{"line":41,"column":31},"generated":{"line":1,"column":311}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":44,"column":6},"generated":{"line":1,"column":320}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"delete","original":{"line":44,"column":23},"generated":{"line":1,"column":322}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"elementToObserve","original":{"line":44,"column":30},"generated":{"line":1,"column":329}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":46,"column":36},"generated":{"line":1,"column":332}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":46,"column":10},"generated":{"line":1,"column":336}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"size","original":{"line":46,"column":27},"generated":{"line":1,"column":338}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"cancelAnimationFrame","original":{"line":48,"column":8},"generated":{"line":1,"column":344}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rafId","original":{"line":48,"column":29},"generated":{"line":1,"column":365}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":64,"column":0},"generated":{"line":1,"column":370}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rafId","original":{"line":64,"column":4},"generated":{"line":1,"column":374}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":376}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":383}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":398}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":406}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":419}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":420}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":427}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":431}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":439}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":458}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":65,"column":0},"generated":{"line":1,"column":460}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":65,"column":6},"generated":{"line":1,"column":466}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":65,"column":56},"generated":{"line":1,"column":468}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"Map","original":{"line":65,"column":60},"generated":{"line":1,"column":472}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":67,"column":0},"generated":{"line":1,"column":476}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":67,"column":9},"generated":{"line":1,"column":485}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":68,"column":2},"generated":{"line":1,"column":489}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"changedRectsData","original":{"line":68,"column":8},"generated":{"line":1,"column":495}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":68,"column":48},"generated":{"line":1,"column":497}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"observedElements","original":{"line":71,"column":2},"generated":{"line":1,"column":500}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"forEach","original":{"line":71,"column":19},"generated":{"line":1,"column":502}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":71,"column":27},"generated":{"line":1,"column":510}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"data","original":{"line":71,"column":28},"generated":{"line":1,"column":511}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"element","original":{"line":71,"column":34},"generated":{"line":1,"column":513}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":72,"column":4},"generated":{"line":1,"column":518}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"newRect","original":{"line":72,"column":10},"generated":{"line":1,"column":524}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"element","original":{"line":72,"column":20},"generated":{"line":1,"column":526}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"getBoundingClientRect","original":{"line":72,"column":28},"generated":{"line":1,"column":528}},{"source":"packages/core/rect/src/observeElementRect.ts","name":null,"original":{"line":94,"column":0},"generated":{"line":1,"column":552}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect1","original":{"line":94,"column":20},"generated":{"line":1,"column":556}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":94,"column":39},"generated":{"line":1,"column":558}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":94,"column":39},"generated":{"line":1,"column":560}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"newRect","original":{"line":75,"column":31},"generated":{"line":1,"column":562}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect1","original":{"line":94,"column":20},"generated":{"line":1,"column":566}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"data","original":{"line":75,"column":20},"generated":{"line":1,"column":568}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect","original":{"line":75,"column":25},"generated":{"line":1,"column":570}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"width","original":{"line":96,"column":10},"generated":{"line":1,"column":576}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":96,"column":20},"generated":{"line":1,"column":584}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"width","original":{"line":96,"column":26},"generated":{"line":1,"column":586}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect1","original":{"line":97,"column":4},"generated":{"line":1,"column":593}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"height","original":{"line":97,"column":10},"generated":{"line":1,"column":595}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":97,"column":21},"generated":{"line":1,"column":604}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"height","original":{"line":97,"column":27},"generated":{"line":1,"column":606}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect1","original":{"line":98,"column":4},"generated":{"line":1,"column":614}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"top","original":{"line":98,"column":10},"generated":{"line":1,"column":616}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":98,"column":18},"generated":{"line":1,"column":622}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"top","original":{"line":98,"column":24},"generated":{"line":1,"column":624}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect1","original":{"line":99,"column":4},"generated":{"line":1,"column":629}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"right","original":{"line":99,"column":10},"generated":{"line":1,"column":631}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":99,"column":20},"generated":{"line":1,"column":639}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"right","original":{"line":99,"column":26},"generated":{"line":1,"column":641}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect1","original":{"line":100,"column":4},"generated":{"line":1,"column":648}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"bottom","original":{"line":100,"column":10},"generated":{"line":1,"column":650}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":100,"column":21},"generated":{"line":1,"column":659}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"bottom","original":{"line":100,"column":27},"generated":{"line":1,"column":661}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect1","original":{"line":101,"column":4},"generated":{"line":1,"column":669}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"left","original":{"line":101,"column":10},"generated":{"line":1,"column":671}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect2","original":{"line":101,"column":19},"generated":{"line":1,"column":678}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"left","original":{"line":101,"column":25},"generated":{"line":1,"column":680}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"data","original":{"line":76,"column":6},"generated":{"line":1,"column":688}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect","original":{"line":76,"column":11},"generated":{"line":1,"column":690}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"newRect","original":{"line":76,"column":18},"generated":{"line":1,"column":695}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"changedRectsData","original":{"line":77,"column":6},"generated":{"line":1,"column":697}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"push","original":{"line":77,"column":23},"generated":{"line":1,"column":699}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"data","original":{"line":77,"column":28},"generated":{"line":1,"column":704}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"changedRectsData","original":{"line":83,"column":2},"generated":{"line":1,"column":710}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"forEach","original":{"line":83,"column":19},"generated":{"line":1,"column":712}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"data","original":{"line":83,"column":28},"generated":{"line":1,"column":720}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"data","original":{"line":84,"column":4},"generated":{"line":1,"column":724}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callbacks","original":{"line":84,"column":9},"generated":{"line":1,"column":726}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"forEach","original":{"line":84,"column":19},"generated":{"line":1,"column":736}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callback","original":{"line":84,"column":28},"generated":{"line":1,"column":744}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"callback","original":{"line":84,"column":41},"generated":{"line":1,"column":747}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"data","original":{"line":84,"column":50},"generated":{"line":1,"column":749}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rect","original":{"line":84,"column":55},"generated":{"line":1,"column":751}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"rafId","original":{"line":87,"column":2},"generated":{"line":1,"column":760}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"requestAnimationFrame","original":{"line":87,"column":10},"generated":{"line":1,"column":762}},{"source":"packages/core/rect/src/observeElementRect.ts","name":"runLoop","original":{"line":87,"column":32},"generated":{"line":1,"column":784}}],"sources":{"packages/core/rect/src/observeElementRect.ts":"type Measurable = { getBoundingClientRect(): ClientRect };\n\n/**\n * Observes an element's rectangle on screen (getBoundingClientRect)\n * This is useful to track elements on the screen and attach other elements\n * that might be in different layers, etc.\n */\nfunction observeElementRect(\n  /** The element whose rect to observe */\n  elementToObserve: Measurable,\n  /** The callback which will be called when the rect changes */\n  callback: CallbackFn\n) {\n  const observedData = observedElements.get(elementToObserve);\n\n  if (observedData === undefined) {\n    // add the element to the map of observed elements with its first callback\n    // because this is the first time this element is observed\n    observedElements.set(elementToObserve, { rect: {} as ClientRect, callbacks: [callback] });\n\n    if (observedElements.size === 1) {\n      // start the internal loop once at least 1 element is observed\n      rafId = requestAnimationFrame(runLoop);\n    }\n  } else {\n    // only add a callback for this element as it's already observed\n    observedData.callbacks.push(callback);\n    callback(elementToObserve.getBoundingClientRect());\n  }\n\n  return () => {\n    const observedData = observedElements.get(elementToObserve);\n    if (observedData === undefined) return;\n\n    // start by removing the callback\n    const index = observedData.callbacks.indexOf(callback);\n    if (index > -1) {\n      observedData.callbacks.splice(index, 1);\n    }\n\n    if (observedData.callbacks.length === 0) {\n      // stop observing this element because there are no\n      // callbacks registered for it anymore\n      observedElements.delete(elementToObserve);\n\n      if (observedElements.size === 0) {\n        // stop the internal loop once no elements are observed anymore\n        cancelAnimationFrame(rafId);\n      }\n    }\n  };\n}\n\n// ========================================================================\n// module internals\n\ntype CallbackFn = (rect: ClientRect) => void;\n\ntype ObservedData = {\n  rect: ClientRect;\n  callbacks: Array<CallbackFn>;\n};\n\nlet rafId: number;\nconst observedElements: Map<Measurable, ObservedData> = new Map();\n\nfunction runLoop() {\n  const changedRectsData: Array<ObservedData> = [];\n\n  // process all DOM reads first (getBoundingClientRect)\n  observedElements.forEach((data, element) => {\n    const newRect = element.getBoundingClientRect();\n\n    // gather all the data for elements whose rects have changed\n    if (!rectEquals(data.rect, newRect)) {\n      data.rect = newRect;\n      changedRectsData.push(data);\n    }\n  });\n\n  // group DOM writes here after the DOM reads (getBoundingClientRect)\n  // as DOM writes will most likely happen with the callbacks\n  changedRectsData.forEach((data) => {\n    data.callbacks.forEach((callback) => callback(data.rect));\n  });\n\n  rafId = requestAnimationFrame(runLoop);\n}\n// ========================================================================\n\n/**\n * Returns whether 2 rects are equal in values\n */\nfunction rectEquals(rect1: ClientRect, rect2: ClientRect) {\n  return (\n    rect1.width === rect2.width &&\n    rect1.height === rect2.height &&\n    rect1.top === rect2.top &&\n    rect1.right === rect2.right &&\n    rect1.bottom === rect2.bottom &&\n    rect1.left === rect2.left\n  );\n}\n\nexport { observeElementRect };\nexport type { Measurable };\n"},"lineCount":null}},"error":null,"hash":"8531a1676a53fee491672bdfcd9f97e6","cacheData":{"env":{}}}