{"id":"gvLN","dependencies":[{"name":"/home/moh/Desktop/MYPortfolio/package.json","includedInParent":true,"mtime":1725356897845},{"name":"/home/moh/Desktop/MYPortfolio/node_modules/three-stdlib/package.json","includedInParent":true,"mtime":1724625312988},{"name":"three","loc":{"line":1,"column":53,"index":53},"parent":"/home/moh/Desktop/MYPortfolio/node_modules/three-stdlib/helpers/LightProbeHelper.js","resolved":"/home/moh/Desktop/MYPortfolio/node_modules/three/build/three.module.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.LightProbeHelper=void 0;var e=require(\"three\");class t extends e.Mesh{constructor(t,i){const r=new e.ShaderMaterial({type:\"LightProbeHelperMaterial\",uniforms:{sh:{value:t.sh.coefficients},intensity:{value:t.intensity}},vertexShader:[\"varying vec3 vNormal;\",\"void main() {\",\"\\tvNormal = normalize( normalMatrix * normal );\",\"\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\"}\"].join(\"\\n\"),fragmentShader:[\"#define RECIPROCAL_PI 0.318309886\",\"vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {\",\"\\t// matrix is assumed to be orthogonal\",\"\\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );\",\"}\",\"// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\",\"vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\",\"\\t// normal is assumed to have unit length\",\"\\tfloat x = normal.x, y = normal.y, z = normal.z;\",\"\\t// band 0\",\"\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\",\"\\t// band 1\",\"\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\",\"\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\",\"\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\",\"\\t// band 2\",\"\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\",\"\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\",\"\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\",\"\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\",\"\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\",\"\\treturn result;\",\"}\",\"uniform vec3 sh[ 9 ]; // sh coefficients\",\"uniform float intensity; // light probe intensity\",\"varying vec3 vNormal;\",\"void main() {\",\"\\tvec3 normal = normalize( vNormal );\",\"\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\",\"\\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );\",\"\\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;\",\"\\tgl_FragColor = linearToOutputTexel( vec4( outgoingLight, 1.0 ) );\",\"}\"].join(\"\\n\")});super(new e.SphereGeometry(1,32,16),r),this.lightProbe=t,this.size=i,this.type=\"LightProbeHelper\",this.onBeforeRender()}dispose(){this.geometry.dispose(),this.material.dispose()}onBeforeRender(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity}}exports.LightProbeHelper=t;"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":38,"column":1},"generated":{"line":1,"column":98}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":1,"column":0},"generated":{"line":1,"column":100}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"_three","original":{"line":1,"column":0},"generated":{"line":1,"column":104}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"require","original":{"line":1,"column":0},"generated":{"line":1,"column":106}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":1,"column":0},"generated":{"line":1,"column":114}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":3,"column":0},"generated":{"line":1,"column":123}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"LightProbeHelper","original":{"line":3,"column":6},"generated":{"line":1,"column":129}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"Mesh","original":{"line":3,"column":31},"generated":{"line":1,"column":139}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":3,"column":35},"generated":{"line":1,"column":141}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"constructor","original":{"line":4,"column":2},"generated":{"line":1,"column":146}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"lightProbe","original":{"line":4,"column":14},"generated":{"line":1,"column":158}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"size","original":{"line":4,"column":26},"generated":{"line":1,"column":160}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":5,"column":4},"generated":{"line":1,"column":163}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"material","original":{"line":5,"column":10},"generated":{"line":1,"column":169}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":5,"column":21},"generated":{"line":1,"column":171}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"ShaderMaterial","original":{"line":5,"column":25},"generated":{"line":1,"column":175}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":5,"column":39},"generated":{"line":1,"column":177}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":5,"column":40},"generated":{"line":1,"column":192}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"type","original":{"line":6,"column":6},"generated":{"line":1,"column":193}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":6,"column":12},"generated":{"line":1,"column":198}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"uniforms","original":{"line":7,"column":6},"generated":{"line":1,"column":225}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":7,"column":16},"generated":{"line":1,"column":234}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"sh","original":{"line":8,"column":8},"generated":{"line":1,"column":235}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":8,"column":12},"generated":{"line":1,"column":238}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"value","original":{"line":9,"column":10},"generated":{"line":1,"column":239}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"lightProbe","original":{"line":9,"column":17},"generated":{"line":1,"column":245}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"sh","original":{"line":9,"column":28},"generated":{"line":1,"column":247}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"coefficients","original":{"line":9,"column":31},"generated":{"line":1,"column":250}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"intensity","original":{"line":12,"column":8},"generated":{"line":1,"column":264}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":12,"column":19},"generated":{"line":1,"column":274}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"value","original":{"line":13,"column":10},"generated":{"line":1,"column":275}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"lightProbe","original":{"line":13,"column":17},"generated":{"line":1,"column":281}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"intensity","original":{"line":13,"column":28},"generated":{"line":1,"column":283}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"vertexShader","original":{"line":16,"column":6},"generated":{"line":1,"column":295}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":16,"column":20},"generated":{"line":1,"column":308}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":16,"column":21},"generated":{"line":1,"column":309}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":16,"column":46},"generated":{"line":1,"column":333}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":16,"column":63},"generated":{"line":1,"column":349}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":16,"column":113},"generated":{"line":1,"column":399}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":16,"column":191},"generated":{"line":1,"column":477}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"join","original":{"line":16,"column":196},"generated":{"line":1,"column":482}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":16,"column":201},"generated":{"line":1,"column":487}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"fragmentShader","original":{"line":17,"column":6},"generated":{"line":1,"column":493}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":22},"generated":{"line":1,"column":508}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":23},"generated":{"line":1,"column":509}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":60},"generated":{"line":1,"column":545}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":130},"generated":{"line":1,"column":614}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":172},"generated":{"line":1,"column":656}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":234},"generated":{"line":1,"column":718}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":239},"generated":{"line":1,"column":722}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":308},"generated":{"line":1,"column":790}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":383},"generated":{"line":1,"column":864}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":428},"generated":{"line":1,"column":909}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":480},"generated":{"line":1,"column":961}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":494},"generated":{"line":1,"column":975}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":544},"generated":{"line":1,"column":1025}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":558},"generated":{"line":1,"column":1039}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":614},"generated":{"line":1,"column":1095}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":670},"generated":{"line":1,"column":1151}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":726},"generated":{"line":1,"column":1207}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":740},"generated":{"line":1,"column":1221}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":800},"generated":{"line":1,"column":1281}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":860},"generated":{"line":1,"column":1341}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":929},"generated":{"line":1,"column":1410}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":989},"generated":{"line":1,"column":1470}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1055},"generated":{"line":1,"column":1536}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1074},"generated":{"line":1,"column":1555}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1079},"generated":{"line":1,"column":1559}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1123},"generated":{"line":1,"column":1602}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1176},"generated":{"line":1,"column":1654}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1201},"generated":{"line":1,"column":1678}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1218},"generated":{"line":1,"column":1694}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1258},"generated":{"line":1,"column":1734}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1330},"generated":{"line":1,"column":1806}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1390},"generated":{"line":1,"column":1866}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1455},"generated":{"line":1,"column":1931}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1525},"generated":{"line":1,"column":2001}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"join","original":{"line":17,"column":1530},"generated":{"line":1,"column":2006}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":17,"column":1535},"generated":{"line":1,"column":2011}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":20,"column":4},"generated":{"line":1,"column":2019}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":19,"column":21},"generated":{"line":1,"column":2025}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"SphereGeometry","original":{"line":19,"column":25},"generated":{"line":1,"column":2029}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":19,"column":39},"generated":{"line":1,"column":2031}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":19,"column":40},"generated":{"line":1,"column":2046}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":19,"column":43},"generated":{"line":1,"column":2048}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":19,"column":47},"generated":{"line":1,"column":2051}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"material","original":{"line":20,"column":20},"generated":{"line":1,"column":2055}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":21,"column":4},"generated":{"line":1,"column":2058}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"lightProbe","original":{"line":21,"column":9},"generated":{"line":1,"column":2063}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"lightProbe","original":{"line":21,"column":22},"generated":{"line":1,"column":2074}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":22,"column":4},"generated":{"line":1,"column":2076}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"size","original":{"line":22,"column":9},"generated":{"line":1,"column":2081}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"size","original":{"line":22,"column":16},"generated":{"line":1,"column":2086}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":23,"column":4},"generated":{"line":1,"column":2088}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"type","original":{"line":23,"column":9},"generated":{"line":1,"column":2093}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":23,"column":16},"generated":{"line":1,"column":2098}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":24,"column":4},"generated":{"line":1,"column":2117}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"onBeforeRender","original":{"line":24,"column":9},"generated":{"line":1,"column":2122}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"dispose","original":{"line":27,"column":2},"generated":{"line":1,"column":2139}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":28,"column":4},"generated":{"line":1,"column":2149}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"geometry","original":{"line":28,"column":9},"generated":{"line":1,"column":2154}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"dispose","original":{"line":28,"column":18},"generated":{"line":1,"column":2163}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":29,"column":4},"generated":{"line":1,"column":2173}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"material","original":{"line":29,"column":9},"generated":{"line":1,"column":2178}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"dispose","original":{"line":29,"column":18},"generated":{"line":1,"column":2187}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"onBeforeRender","original":{"line":32,"column":2},"generated":{"line":1,"column":2197}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":33,"column":4},"generated":{"line":1,"column":2214}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"position","original":{"line":33,"column":9},"generated":{"line":1,"column":2219}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"copy","original":{"line":33,"column":18},"generated":{"line":1,"column":2228}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":33,"column":23},"generated":{"line":1,"column":2233}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"lightProbe","original":{"line":33,"column":28},"generated":{"line":1,"column":2238}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"position","original":{"line":33,"column":39},"generated":{"line":1,"column":2249}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":34,"column":4},"generated":{"line":1,"column":2259}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"scale","original":{"line":34,"column":9},"generated":{"line":1,"column":2264}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"set","original":{"line":34,"column":15},"generated":{"line":1,"column":2270}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":34,"column":19},"generated":{"line":1,"column":2274}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":34,"column":22},"generated":{"line":1,"column":2276}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":34,"column":25},"generated":{"line":1,"column":2278}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"multiplyScalar","original":{"line":34,"column":28},"generated":{"line":1,"column":2281}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":34,"column":43},"generated":{"line":1,"column":2296}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"size","original":{"line":34,"column":48},"generated":{"line":1,"column":2301}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":35,"column":4},"generated":{"line":1,"column":2307}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"material","original":{"line":35,"column":9},"generated":{"line":1,"column":2312}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"uniforms","original":{"line":35,"column":18},"generated":{"line":1,"column":2321}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"intensity","original":{"line":35,"column":27},"generated":{"line":1,"column":2330}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"value","original":{"line":35,"column":37},"generated":{"line":1,"column":2340}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","original":{"line":35,"column":45},"generated":{"line":1,"column":2346}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"lightProbe","original":{"line":35,"column":50},"generated":{"line":1,"column":2351}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"intensity","original":{"line":35,"column":61},"generated":{"line":1,"column":2362}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"exports","original":{"line":38,"column":1},"generated":{"line":1,"column":2373}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"LightProbeHelper","original":{"line":38,"column":1},"generated":{"line":1,"column":2381}},{"source":"node_modules/three-stdlib/helpers/LightProbeHelper.js","name":"LightProbeHelper","original":{"line":38,"column":1},"generated":{"line":1,"column":2398}}],"sources":{"node_modules/three-stdlib/helpers/LightProbeHelper.js":"import { Mesh, ShaderMaterial, SphereGeometry } from 'three';\n\nclass LightProbeHelper extends Mesh {\n  constructor(lightProbe, size) {\n    const material = new ShaderMaterial({\n      type: 'LightProbeHelperMaterial',\n      uniforms: {\n        sh: {\n          value: lightProbe.sh.coefficients\n        },\n        // by reference\n        intensity: {\n          value: lightProbe.intensity\n        }\n      },\n      vertexShader: ['varying vec3 vNormal;', 'void main() {', '\tvNormal = normalize( normalMatrix * normal );', '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n      fragmentShader: ['#define RECIPROCAL_PI 0.318309886', 'vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {', '\t// matrix is assumed to be orthogonal', '\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );', '}', '// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf', 'vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {', '\t// normal is assumed to have unit length', '\tfloat x = normal.x, y = normal.y, z = normal.z;', '\t// band 0', '\tvec3 result = shCoefficients[ 0 ] * 0.886227;', '\t// band 1', '\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;', '\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;', '\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;', '\t// band 2', '\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;', '\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;', '\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );', '\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;', '\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );', '\treturn result;', '}', 'uniform vec3 sh[ 9 ]; // sh coefficients', 'uniform float intensity; // light probe intensity', 'varying vec3 vNormal;', 'void main() {', '\tvec3 normal = normalize( vNormal );', '\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );', '\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );', '\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;', '\tgl_FragColor = linearToOutputTexel( vec4( outgoingLight, 1.0 ) );', '}'].join('\\n')\n    });\n    const geometry = new SphereGeometry(1, 32, 16);\n    super(geometry, material);\n    this.lightProbe = lightProbe;\n    this.size = size;\n    this.type = 'LightProbeHelper';\n    this.onBeforeRender();\n  }\n\n  dispose() {\n    this.geometry.dispose();\n    this.material.dispose();\n  }\n\n  onBeforeRender() {\n    this.position.copy(this.lightProbe.position);\n    this.scale.set(1, 1, 1).multiplyScalar(this.size);\n    this.material.uniforms.intensity.value = this.lightProbe.intensity;\n  }\n\n}\n\nexport { LightProbeHelper };\n"},"lineCount":null}},"error":null,"hash":"bebc16d84e8c04d7e9422372b3343d89","cacheData":{"env":{}}}