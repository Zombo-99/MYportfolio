{"id":"F2XV","dependencies":[{"name":"/home/moh/Desktop/MYPortfolio/package.json","includedInParent":true,"mtime":1725356897845},{"name":"/home/moh/Desktop/MYPortfolio/node_modules/three-stdlib/package.json","includedInParent":true,"mtime":1724625312988},{"name":"three","loc":{"line":1,"column":33,"index":33},"parent":"/home/moh/Desktop/MYPortfolio/node_modules/three-stdlib/shaders/SAOShader.js","resolved":"/home/moh/Desktop/MYPortfolio/node_modules/three/build/three.module.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.SAOShader=void 0;var e=require(\"three\");const t=exports.SAOShader={defines:{NUM_SAMPLES:7,NUM_RINGS:4,NORMAL_TEXTURE:0,DIFFUSE_TEXTURE:0,DEPTH_PACKING:1,PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},tDiffuse:{value:null},tNormal:{value:null},size:{value:new e.Vector2(512,512)},cameraNear:{value:1},cameraFar:{value:100},cameraProjectionMatrix:{value:new e.Matrix4},cameraInverseProjectionMatrix:{value:new e.Matrix4},scale:{value:1},intensity:{value:.1},bias:{value:.5},minResolution:{value:0},kernelRadius:{value:100},randomSeed:{value:0}},vertexShader:[\"varying vec2 vUv;\",\"void main() {\",\"\\tvUv = uv;\",\"\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\"}\"].join(\"\\n\"),fragmentShader:[\"#include <common>\",\"varying vec2 vUv;\",\"#if DIFFUSE_TEXTURE == 1\",\"uniform sampler2D tDiffuse;\",\"#endif\",\"uniform sampler2D tDepth;\",\"#if NORMAL_TEXTURE == 1\",\"uniform sampler2D tNormal;\",\"#endif\",\"uniform float cameraNear;\",\"uniform float cameraFar;\",\"uniform mat4 cameraProjectionMatrix;\",\"uniform mat4 cameraInverseProjectionMatrix;\",\"uniform float scale;\",\"uniform float intensity;\",\"uniform float bias;\",\"uniform float kernelRadius;\",\"uniform float minResolution;\",\"uniform vec2 size;\",\"uniform float randomSeed;\",\"// RGBA depth\",\"#include <packing>\",\"vec4 getDefaultColor( const in vec2 screenPosition ) {\",\"\\t#if DIFFUSE_TEXTURE == 1\",\"\\treturn texture2D( tDiffuse, vUv );\",\"\\t#else\",\"\\treturn vec4( 1.0 );\",\"\\t#endif\",\"}\",\"float getDepth( const in vec2 screenPosition ) {\",\"\\t#if DEPTH_PACKING == 1\",\"\\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );\",\"\\t#else\",\"\\treturn texture2D( tDepth, screenPosition ).x;\",\"\\t#endif\",\"}\",\"float getViewZ( const in float depth ) {\",\"\\t#if PERSPECTIVE_CAMERA == 1\",\"\\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );\",\"\\t#else\",\"\\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );\",\"\\t#endif\",\"}\",\"vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {\",\"\\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];\",\"\\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );\",\"\\tclipPosition *= clipW; // unprojection.\",\"\\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;\",\"}\",\"vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {\",\"\\t#if NORMAL_TEXTURE == 1\",\"\\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );\",\"\\t#else\",\"\\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );\",\"\\t#endif\",\"}\",\"float scaleDividedByCameraFar;\",\"float minResolutionMultipliedByCameraFar;\",\"float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {\",\"\\tvec3 viewDelta = sampleViewPosition - centerViewPosition;\",\"\\tfloat viewDistance = length( viewDelta );\",\"\\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;\",\"\\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );\",\"}\",\"// moving costly divides into consts\",\"const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\",\"const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\",\"float getAmbientOcclusion( const in vec3 centerViewPosition ) {\",\"\\t// precompute some variables require in getOcclusion.\",\"\\tscaleDividedByCameraFar = scale / cameraFar;\",\"\\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;\",\"\\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );\",\"\\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\",\"\\tfloat angle = rand( vUv + randomSeed ) * PI2;\",\"\\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;\",\"\\tvec2 radiusStep = radius;\",\"\\tfloat occlusionSum = 0.0;\",\"\\tfloat weightSum = 0.0;\",\"\\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {\",\"\\t\\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;\",\"\\t\\tradius += radiusStep;\",\"\\t\\tangle += ANGLE_STEP;\",\"\\t\\tfloat sampleDepth = getDepth( sampleUv );\",\"\\t\\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {\",\"\\t\\t\\tcontinue;\",\"\\t\\t}\",\"\\t\\tfloat sampleViewZ = getViewZ( sampleDepth );\",\"\\t\\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );\",\"\\t\\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );\",\"\\t\\tweightSum += 1.0;\",\"\\t}\",\"\\tif( weightSum == 0.0 ) discard;\",\"\\treturn occlusionSum * ( intensity / weightSum );\",\"}\",\"void main() {\",\"\\tfloat centerDepth = getDepth( vUv );\",\"\\tif( centerDepth >= ( 1.0 - EPSILON ) ) {\",\"\\t\\tdiscard;\",\"\\t}\",\"\\tfloat centerViewZ = getViewZ( centerDepth );\",\"\\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );\",\"\\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );\",\"\\tgl_FragColor = getDefaultColor( vUv );\",\"\\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;\",\"}\"].join(\"\\n\")};"},"sourceMaps":{"js":{"mappings":[{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":0}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":13}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":20}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":35}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":43}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":56}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":57}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":64}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":68}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":76}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":58,"column":1},"generated":{"line":1,"column":91}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":1,"column":0},"generated":{"line":1,"column":93}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"_three","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"require","original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":3,"column":0},"generated":{"line":1,"column":116}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"SAOShader","original":{"line":3,"column":6},"generated":{"line":1,"column":122}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"exports","original":{"line":3,"column":15},"generated":{"line":1,"column":124}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"SAOShader","original":{"line":3,"column":15},"generated":{"line":1,"column":132}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":3,"column":18},"generated":{"line":1,"column":142}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"defines","original":{"line":4,"column":2},"generated":{"line":1,"column":143}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":4,"column":11},"generated":{"line":1,"column":151}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"NUM_SAMPLES","original":{"line":5,"column":4},"generated":{"line":1,"column":152}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":5,"column":17},"generated":{"line":1,"column":164}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"NUM_RINGS","original":{"line":6,"column":4},"generated":{"line":1,"column":166}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":6,"column":15},"generated":{"line":1,"column":176}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"NORMAL_TEXTURE","original":{"line":7,"column":4},"generated":{"line":1,"column":178}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":7,"column":20},"generated":{"line":1,"column":193}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"DIFFUSE_TEXTURE","original":{"line":8,"column":4},"generated":{"line":1,"column":195}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":8,"column":21},"generated":{"line":1,"column":211}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"DEPTH_PACKING","original":{"line":9,"column":4},"generated":{"line":1,"column":213}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":9,"column":19},"generated":{"line":1,"column":227}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"PERSPECTIVE_CAMERA","original":{"line":10,"column":4},"generated":{"line":1,"column":229}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":10,"column":24},"generated":{"line":1,"column":248}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"uniforms","original":{"line":12,"column":2},"generated":{"line":1,"column":251}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":12,"column":12},"generated":{"line":1,"column":260}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"tDepth","original":{"line":13,"column":4},"generated":{"line":1,"column":261}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":13,"column":12},"generated":{"line":1,"column":268}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":14,"column":6},"generated":{"line":1,"column":269}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":14,"column":13},"generated":{"line":1,"column":275}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"tDiffuse","original":{"line":16,"column":4},"generated":{"line":1,"column":281}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":16,"column":14},"generated":{"line":1,"column":290}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":17,"column":6},"generated":{"line":1,"column":291}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":17,"column":13},"generated":{"line":1,"column":297}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"tNormal","original":{"line":19,"column":4},"generated":{"line":1,"column":303}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":19,"column":13},"generated":{"line":1,"column":311}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":20,"column":6},"generated":{"line":1,"column":312}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":20,"column":13},"generated":{"line":1,"column":318}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"size","original":{"line":22,"column":4},"generated":{"line":1,"column":324}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":22,"column":10},"generated":{"line":1,"column":329}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":23,"column":6},"generated":{"line":1,"column":330}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":23,"column":13},"generated":{"line":1,"column":336}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"Vector2","original":{"line":23,"column":17},"generated":{"line":1,"column":340}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":23,"column":24},"generated":{"line":1,"column":342}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":23,"column":25},"generated":{"line":1,"column":350}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":23,"column":30},"generated":{"line":1,"column":354}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"cameraNear","original":{"line":25,"column":4},"generated":{"line":1,"column":360}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":25,"column":16},"generated":{"line":1,"column":371}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":26,"column":6},"generated":{"line":1,"column":372}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":26,"column":13},"generated":{"line":1,"column":378}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"cameraFar","original":{"line":28,"column":4},"generated":{"line":1,"column":381}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":28,"column":15},"generated":{"line":1,"column":391}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":29,"column":6},"generated":{"line":1,"column":392}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":29,"column":13},"generated":{"line":1,"column":398}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"cameraProjectionMatrix","original":{"line":31,"column":4},"generated":{"line":1,"column":403}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":31,"column":28},"generated":{"line":1,"column":426}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":32,"column":6},"generated":{"line":1,"column":427}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":32,"column":13},"generated":{"line":1,"column":433}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"Matrix4","original":{"line":32,"column":17},"generated":{"line":1,"column":437}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":32,"column":24},"generated":{"line":1,"column":439}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"cameraInverseProjectionMatrix","original":{"line":34,"column":4},"generated":{"line":1,"column":448}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":34,"column":35},"generated":{"line":1,"column":478}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":35,"column":6},"generated":{"line":1,"column":479}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":35,"column":13},"generated":{"line":1,"column":485}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"Matrix4","original":{"line":35,"column":17},"generated":{"line":1,"column":489}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":35,"column":24},"generated":{"line":1,"column":491}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"scale","original":{"line":37,"column":4},"generated":{"line":1,"column":500}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":37,"column":11},"generated":{"line":1,"column":506}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":38,"column":6},"generated":{"line":1,"column":507}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":38,"column":13},"generated":{"line":1,"column":513}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"intensity","original":{"line":40,"column":4},"generated":{"line":1,"column":516}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":40,"column":15},"generated":{"line":1,"column":526}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":41,"column":6},"generated":{"line":1,"column":527}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":41,"column":13},"generated":{"line":1,"column":533}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"bias","original":{"line":43,"column":4},"generated":{"line":1,"column":537}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":43,"column":10},"generated":{"line":1,"column":542}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":44,"column":6},"generated":{"line":1,"column":543}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":44,"column":13},"generated":{"line":1,"column":549}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"minResolution","original":{"line":46,"column":4},"generated":{"line":1,"column":553}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":46,"column":19},"generated":{"line":1,"column":567}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":47,"column":6},"generated":{"line":1,"column":568}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":47,"column":13},"generated":{"line":1,"column":574}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"kernelRadius","original":{"line":49,"column":4},"generated":{"line":1,"column":577}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":49,"column":18},"generated":{"line":1,"column":590}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":50,"column":6},"generated":{"line":1,"column":591}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":50,"column":13},"generated":{"line":1,"column":597}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"randomSeed","original":{"line":52,"column":4},"generated":{"line":1,"column":602}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":52,"column":16},"generated":{"line":1,"column":613}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"value","original":{"line":53,"column":6},"generated":{"line":1,"column":614}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":53,"column":13},"generated":{"line":1,"column":620}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"vertexShader","original":{"line":56,"column":2},"generated":{"line":1,"column":624}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":56,"column":16},"generated":{"line":1,"column":637}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":56,"column":17},"generated":{"line":1,"column":638}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":56,"column":38},"generated":{"line":1,"column":658}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":56,"column":55},"generated":{"line":1,"column":674}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":56,"column":69},"generated":{"line":1,"column":688}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":56,"column":147},"generated":{"line":1,"column":766}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"join","original":{"line":56,"column":152},"generated":{"line":1,"column":771}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":56,"column":157},"generated":{"line":1,"column":776}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"fragmentShader","original":{"line":57,"column":2},"generated":{"line":1,"column":782}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":18},"generated":{"line":1,"column":797}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":19},"generated":{"line":1,"column":798}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":40},"generated":{"line":1,"column":818}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":61},"generated":{"line":1,"column":838}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":89},"generated":{"line":1,"column":865}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":120},"generated":{"line":1,"column":895}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":130},"generated":{"line":1,"column":904}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":159},"generated":{"line":1,"column":932}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":186},"generated":{"line":1,"column":958}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":216},"generated":{"line":1,"column":987}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":226},"generated":{"line":1,"column":996}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":255},"generated":{"line":1,"column":1024}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":283},"generated":{"line":1,"column":1051}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":323},"generated":{"line":1,"column":1090}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":370},"generated":{"line":1,"column":1136}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":394},"generated":{"line":1,"column":1159}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":422},"generated":{"line":1,"column":1186}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":445},"generated":{"line":1,"column":1208}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":476},"generated":{"line":1,"column":1238}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":508},"generated":{"line":1,"column":1269}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":530},"generated":{"line":1,"column":1290}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":559},"generated":{"line":1,"column":1318}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":576},"generated":{"line":1,"column":1334}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":598},"generated":{"line":1,"column":1355}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":656},"generated":{"line":1,"column":1412}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":685},"generated":{"line":1,"column":1441}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":724},"generated":{"line":1,"column":1480}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":734},"generated":{"line":1,"column":1490}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":758},"generated":{"line":1,"column":1514}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":769},"generated":{"line":1,"column":1525}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":774},"generated":{"line":1,"column":1529}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":826},"generated":{"line":1,"column":1580}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":853},"generated":{"line":1,"column":1607}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":922},"generated":{"line":1,"column":1676}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":932},"generated":{"line":1,"column":1686}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":982},"generated":{"line":1,"column":1736}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":993},"generated":{"line":1,"column":1747}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":998},"generated":{"line":1,"column":1751}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1042},"generated":{"line":1,"column":1794}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1074},"generated":{"line":1,"column":1826}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1142},"generated":{"line":1,"column":1894}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1152},"generated":{"line":1,"column":1904}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1221},"generated":{"line":1,"column":1973}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1232},"generated":{"line":1,"column":1984}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1237},"generated":{"line":1,"column":1988}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1339},"generated":{"line":1,"column":2089}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1426},"generated":{"line":1,"column":2176}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1510},"generated":{"line":1,"column":2260}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1554},"generated":{"line":1,"column":2304}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1619},"generated":{"line":1,"column":2369}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1624},"generated":{"line":1,"column":2373}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1708},"generated":{"line":1,"column":2456}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1736},"generated":{"line":1,"column":2484}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1810},"generated":{"line":1,"column":2558}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1820},"generated":{"line":1,"column":2568}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1897},"generated":{"line":1,"column":2645}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1908},"generated":{"line":1,"column":2656}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1913},"generated":{"line":1,"column":2660}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1947},"generated":{"line":1,"column":2693}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":1992},"generated":{"line":1,"column":2737}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2118},"generated":{"line":1,"column":2862}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2180},"generated":{"line":1,"column":2924}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2226},"generated":{"line":1,"column":2970}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2299},"generated":{"line":1,"column":3043}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2463},"generated":{"line":1,"column":3207}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2468},"generated":{"line":1,"column":3211}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2508},"generated":{"line":1,"column":3250}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2585},"generated":{"line":1,"column":3326}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2646},"generated":{"line":1,"column":3386}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2713},"generated":{"line":1,"column":3452}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2771},"generated":{"line":1,"column":3510}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2820},"generated":{"line":1,"column":3559}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2888},"generated":{"line":1,"column":3627}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":2958},"generated":{"line":1,"column":3697}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3032},"generated":{"line":1,"column":3771}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3082},"generated":{"line":1,"column":3821}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3147},"generated":{"line":1,"column":3886}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3177},"generated":{"line":1,"column":3916}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3207},"generated":{"line":1,"column":3946}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3234},"generated":{"line":1,"column":3973}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3280},"generated":{"line":1,"column":4019}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3352},"generated":{"line":1,"column":4092}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3379},"generated":{"line":1,"column":4120}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3405},"generated":{"line":1,"column":4147}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3452},"generated":{"line":1,"column":4195}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3498},"generated":{"line":1,"column":4242}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3514},"generated":{"line":1,"column":4260}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3521},"generated":{"line":1,"column":4268}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3571},"generated":{"line":1,"column":4319}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3657},"generated":{"line":1,"column":4406}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3752},"generated":{"line":1,"column":4502}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3775},"generated":{"line":1,"column":4526}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3781},"generated":{"line":1,"column":4532}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3817},"generated":{"line":1,"column":4568}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3870},"generated":{"line":1,"column":4621}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3875},"generated":{"line":1,"column":4625}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3892},"generated":{"line":1,"column":4641}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3933},"generated":{"line":1,"column":4682}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3978},"generated":{"line":1,"column":4727}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3992},"generated":{"line":1,"column":4742}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":3998},"generated":{"line":1,"column":4748}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":4047},"generated":{"line":1,"column":4797}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":4121},"generated":{"line":1,"column":4871}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":4187},"generated":{"line":1,"column":4937}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":4230},"generated":{"line":1,"column":4980}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":4279},"generated":{"line":1,"column":5029}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","name":"join","original":{"line":57,"column":4284},"generated":{"line":1,"column":5034}},{"source":"node_modules/three-stdlib/shaders/SAOShader.js","original":{"line":57,"column":4289},"generated":{"line":1,"column":5039}}],"sources":{"node_modules/three-stdlib/shaders/SAOShader.js":"import { Vector2, Matrix4 } from 'three';\n\nconst SAOShader = {\n  defines: {\n    NUM_SAMPLES: 7,\n    NUM_RINGS: 4,\n    NORMAL_TEXTURE: 0,\n    DIFFUSE_TEXTURE: 0,\n    DEPTH_PACKING: 1,\n    PERSPECTIVE_CAMERA: 1\n  },\n  uniforms: {\n    tDepth: {\n      value: null\n    },\n    tDiffuse: {\n      value: null\n    },\n    tNormal: {\n      value: null\n    },\n    size: {\n      value: new Vector2(512, 512)\n    },\n    cameraNear: {\n      value: 1\n    },\n    cameraFar: {\n      value: 100\n    },\n    cameraProjectionMatrix: {\n      value: new Matrix4()\n    },\n    cameraInverseProjectionMatrix: {\n      value: new Matrix4()\n    },\n    scale: {\n      value: 1.0\n    },\n    intensity: {\n      value: 0.1\n    },\n    bias: {\n      value: 0.5\n    },\n    minResolution: {\n      value: 0.0\n    },\n    kernelRadius: {\n      value: 100.0\n    },\n    randomSeed: {\n      value: 0.0\n    }\n  },\n  vertexShader: ['varying vec2 vUv;', 'void main() {', '\tvUv = uv;', '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );', '}'].join('\\n'),\n  fragmentShader: ['#include <common>', 'varying vec2 vUv;', '#if DIFFUSE_TEXTURE == 1', 'uniform sampler2D tDiffuse;', '#endif', 'uniform sampler2D tDepth;', '#if NORMAL_TEXTURE == 1', 'uniform sampler2D tNormal;', '#endif', 'uniform float cameraNear;', 'uniform float cameraFar;', 'uniform mat4 cameraProjectionMatrix;', 'uniform mat4 cameraInverseProjectionMatrix;', 'uniform float scale;', 'uniform float intensity;', 'uniform float bias;', 'uniform float kernelRadius;', 'uniform float minResolution;', 'uniform vec2 size;', 'uniform float randomSeed;', '// RGBA depth', '#include <packing>', 'vec4 getDefaultColor( const in vec2 screenPosition ) {', '\t#if DIFFUSE_TEXTURE == 1', '\treturn texture2D( tDiffuse, vUv );', '\t#else', '\treturn vec4( 1.0 );', '\t#endif', '}', 'float getDepth( const in vec2 screenPosition ) {', '\t#if DEPTH_PACKING == 1', '\treturn unpackRGBAToDepth( texture2D( tDepth, screenPosition ) );', '\t#else', '\treturn texture2D( tDepth, screenPosition ).x;', '\t#endif', '}', 'float getViewZ( const in float depth ) {', '\t#if PERSPECTIVE_CAMERA == 1', '\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );', '\t#else', '\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );', '\t#endif', '}', 'vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {', '\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];', '\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );', '\tclipPosition *= clipW; // unprojection.', '\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;', '}', 'vec3 getViewNormal( const in vec3 viewPosition, const in vec2 screenPosition ) {', '\t#if NORMAL_TEXTURE == 1', '\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );', '\t#else', '\treturn normalize( cross( dFdx( viewPosition ), dFdy( viewPosition ) ) );', '\t#endif', '}', 'float scaleDividedByCameraFar;', 'float minResolutionMultipliedByCameraFar;', 'float getOcclusion( const in vec3 centerViewPosition, const in vec3 centerViewNormal, const in vec3 sampleViewPosition ) {', '\tvec3 viewDelta = sampleViewPosition - centerViewPosition;', '\tfloat viewDistance = length( viewDelta );', '\tfloat scaledScreenDistance = scaleDividedByCameraFar * viewDistance;', '\treturn max(0.0, (dot(centerViewNormal, viewDelta) - minResolutionMultipliedByCameraFar) / scaledScreenDistance - bias) / (1.0 + pow2( scaledScreenDistance ) );', '}', '// moving costly divides into consts', 'const float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );', 'const float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );', 'float getAmbientOcclusion( const in vec3 centerViewPosition ) {', '\t// precompute some variables require in getOcclusion.', '\tscaleDividedByCameraFar = scale / cameraFar;', '\tminResolutionMultipliedByCameraFar = minResolution * cameraFar;', '\tvec3 centerViewNormal = getViewNormal( centerViewPosition, vUv );', '\t// jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/', '\tfloat angle = rand( vUv + randomSeed ) * PI2;', '\tvec2 radius = vec2( kernelRadius * INV_NUM_SAMPLES ) / size;', '\tvec2 radiusStep = radius;', '\tfloat occlusionSum = 0.0;', '\tfloat weightSum = 0.0;', '\tfor( int i = 0; i < NUM_SAMPLES; i ++ ) {', '\t\tvec2 sampleUv = vUv + vec2( cos( angle ), sin( angle ) ) * radius;', '\t\tradius += radiusStep;', '\t\tangle += ANGLE_STEP;', '\t\tfloat sampleDepth = getDepth( sampleUv );', '\t\tif( sampleDepth >= ( 1.0 - EPSILON ) ) {', '\t\t\tcontinue;', '\t\t}', '\t\tfloat sampleViewZ = getViewZ( sampleDepth );', '\t\tvec3 sampleViewPosition = getViewPosition( sampleUv, sampleDepth, sampleViewZ );', '\t\tocclusionSum += getOcclusion( centerViewPosition, centerViewNormal, sampleViewPosition );', '\t\tweightSum += 1.0;', '\t}', '\tif( weightSum == 0.0 ) discard;', '\treturn occlusionSum * ( intensity / weightSum );', '}', 'void main() {', '\tfloat centerDepth = getDepth( vUv );', '\tif( centerDepth >= ( 1.0 - EPSILON ) ) {', '\t\tdiscard;', '\t}', '\tfloat centerViewZ = getViewZ( centerDepth );', '\tvec3 viewPosition = getViewPosition( vUv, centerDepth, centerViewZ );', '\tfloat ambientOcclusion = getAmbientOcclusion( viewPosition );', '\tgl_FragColor = getDefaultColor( vUv );', '\tgl_FragColor.xyz *=  1.0 - ambientOcclusion;', '}'].join('\\n')\n};\n\nexport { SAOShader };\n"},"lineCount":null}},"error":null,"hash":"a5c8bbb9da6779e3cac770e54059d1f3","cacheData":{"env":{}}}